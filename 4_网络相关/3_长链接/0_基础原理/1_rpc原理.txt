

1、基础介绍
RPC（Remote Procedure Call）远程过程调用。
是一种通过网络向远程计算机请求服务信息，
但又不需要了解底层网络技术的通信方式。就是像调用本地服务一样调用远程服务。

自己概括：本地调用服务器的一个方法。

RPC 是一种技术思想而非一种规范或协议，常见 RPC 技术和框架有：
应用级的服务框架：
阿里的 Dubbo/Dubbox、Google gRPC、
Spring Boot/Spring Cloud（可以暂理解为外部http协议，内部grpc）。
远程通信协议：RMI、Socket、SOAP(HTTP XML)、REST(HTTP JSON)。
通信框架：MINA 和 Netty。

长链接，不必每次通信都要像http一样去3次握手什么的，减少了网络开销；
其次就是RPC框架一般都有注册中心，客户端请求的是服务注册中心。



2.rpc架构
RPC 架构主要包括三部分：

服务注册中心（Registry），负责将本地服务发布成远程服务，管理远程服务
，提供给服务消费者使用，主要用于实现负载均衡和故障切换。

RPC Server，服务提供者，提供服务接口定义与服务实现类，
服务提供者启动后主动向服务注册中心（Registry）注册机器IP、端口以及提供的服务列表；

RPC Client，服务消费者，通过远程代理对象调用远程服务，
启动时向服务注册中心（Registry）获取服务提供方地址列表。



3.rpc调用过程

调用者（客户端Client）以本地调用的方式发起调用；
Client stub（客户端存根）收到调用后，负责将被调用的方法名、
参数等打包编码成特定格式的能进行网络传输的消息体；
Client stub将消息体通过网络发送给服务端；
Server stub（服务端存根）收到通过网络接收到消息后按照相应格式进行拆包解码，
获取方法名和参数；
Server stub根据方法名和参数进行本地调用；
被调用者（Server）本地调用执行后将结果返回给server stub；
Server stub将返回值打包编码成消息，并通过网络发送给客户端；
Client stub收到消息后，进行拆包解码，返回给Client；
Client得到本次RPC调用的最终结果。

为什么要存根：
客户端和服务器编码不同，使用编译语言不同。
存根（Stub）选取一种中间形式，让两端的数据都可以正确可逆的与中间数据进行转换。
常用的中间数据类型包括：纯字符串、XML、JSON、protobuf。



