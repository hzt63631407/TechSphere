



一.域名解析
为什么需要DNS解析域名为IP地址？
网络通讯大部分是基于TCP/IP的，而TCP/IP是基于IP地址的，
所以计算机在网络上进行通讯时只能识别如“202.96.134.133”之类的IP地址，而不能认识域名。
我们无法记住10个以上IP地址的网站，所以我们访问网站时，
更多的是在浏览器地址栏中输入域名，就能看到所需要的页面，
这是因为有一个叫“DNS服务器”的计算机自动把我们的域名“翻译”成了相应的IP地址，
然后调出IP地址所对应的网页。

1、在浏览器中输入www.qq.com域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，
如果有，就先调用这个IP地址映射，完成域名解析。
2、如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，
是否有这个网址映射关系，如果有，直接返回，完成域名解析。
3、如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，
首先会找TCP/ip参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查




2.浏览器访问全过程
在浏览器地址栏键入URL，按下回车之后会经历以下流程：
1、浏览器向本地 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;
如果本地 DNS 服务器没有域名的解析结果，那么则会递归地向 DNS
系统请求解析，随后将该结果返回给用户。
2、解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;
3、浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，
该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;
4、服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;
5、释放 TCP连接;
6、浏览器将该 html 文本并显示内容



3.输入url没有访问到网页的原因
DNS域名解析出问题
网络断了
服务器拒绝访问
请求或者响应在网络传输中途被劫走了



4.服务部署
要访问某个服务时，令DNS服务器返回运行该服务的所有ip地址，
如果客户端无法连接第一个，那么就连接第二个，然后连接第三个，以此类推。





