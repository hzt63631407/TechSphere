




一、为什么有cookie和session
因为http是无协议，要保持身份所以有cookie有session

1.知道是谁进行了请求，不需要重复验证账号，密码等。
2.同一个域名下的页面不需要重复登陆。
cookie域名范围：
https://blog.csdn.net/huangjuan0229/article/details/131166462
https://www.cnblogs.com/wuyepeng/p/9801023.html





2.在一个网站上面，我发起一次请求，那服务器怎么知道我是谁？是谁发起的这次请求呢，
HTTP协议是无状态的协议，浏览器的每一次请求，服务器都当做一次新请求，
但是在实际应用中我们需要知道这个请求来自于谁，需要查找哪些信息返回给访问者，
这个时候就引入了COOKIE机制，COOKIE机制是什么呢？
其实就是服务器给客户端返回数据的时候，中间加了一个标识，
set-cookie的值，其值的格式通常是name = value的格式
然后客户端再次请求数据的时候，数据中带上这个标识，
那么服务器接收到请求消息时就知道这个请求来自于谁了。
（相当于服务器接收到请求时，如果没有带识别码，生成一个识别码给客户端，
 如果有识别码，就把这个识别码需要的对应内容返回给客户端）

https://blog.csdn.net/qq_44700535/article/details/91890172
（点击一个页面，判断他的cookie是否带有token的字段，如果有，
那么他就是登陆了，如果没有，再去查询数据库，做账户和密码的校验）

客户端和服务端的连接就关闭了。如果再次交换数据，就需要重新建立新的连接。
这就意味着服务端无法从连接上跟踪对话，而cookie机制的引用就解决了这个缺点。
（存储上一次的返回值，可以做缓存）


3.比如：我在www.a.com/login.php里面登陆了，我在www.a.com/index.php 也希望是登陆状态，
那咋搞呢？我不可能这2个页面我都去登陆一遍吧。或者用笨方法这2个页面都去查询数据库，
如果有登陆状态，就判断是登陆的了。
cookie是把少量的信息存储在用户自己的电脑上，
它在一个域名下是一个全局的，（cookie是全局域名）
只要设置它的存储路径在域名www.a.com下 ，那么当用户用浏览器访问时，
php就可以从这个域名的任意页面读取cookie中的信息。
（cookie是缓存，保存在客户端）





二、有了cookie,为什么还有session？
在网站中http请求是无状态的，也就是说即使第一次和服务器连接后并且登录成功后，
第二次请求服务器依然不能知道当前请求是哪个用户，cookie的出现就是为了解决这个问题，
第一次登录后服务器返回一些数据(cookie)给浏览器，然后浏览器保存在本地，
当该用户发送第二次请求的时候，就会自动的把上次请求存储的 cookie数据自动的携带给服务器，
服务器通过浏览器携带的数据就能判断当前用户是哪个了。cookie存储的数据量有限，
不同的浏览器有不同的存储大小，但一般不超过4KB，因此使用 cookie只能存储一些小量的数据。
session和 cookie的作用有点类似，都是为了存储用户相关的信息，不同的是，
cookie是存储在本地浏览器，而session存储在服务器.存储在服务器的数据会更加的安全，
不容易被窃取，也极大的避免了cookie被篡改而带来的安全性问题。
但存储在服务器也有一定的弊端，就是会占用服务器的资源，
但现在服务器已经发展至今，一些session信息还是绰绰有余的

session记录的数据：
当你浏览一个网页时，服务端随机产生一个 1024 比特长的字符串，
然后存在你 Cookie 中的connect.sid字段中。当你下次访问时，Cookie 会带有这个字符串，
然后浏览器就知道你是上次访问过的某某某，然后从服务器的存储中取出上次记录在你身上的数据。
用户与服务器建立连接的同时，服务器会自动为其分配一个SessionId。
服务器从cookie里找到sessionID，再根据sessionID找到以前记录的用户信息就可以知道他是谁,
之前操控哪些、访问过哪里，还有视频看到了哪里，再返回对应的数据。
（session的内容会进行更新，sessionid一般通过cookie传递）
（类似埋点，但是埋点只有一个字段，session的数据可能不是一个字段。）

http://t.zoukankan.com/tangliMeiMei-p-15474087.html

cookie不用再重复登陆了，session知道这个用户浏览了访问了哪些信息。













