

性能测试：
对一个系统进行检查


全链路压测：
也是性能测试，要求更高
仿真的要求，要求真实性

单链路：一个查询请求
全链路：全部请求


影子库：
就是影子的数据存储：mysql，redis，mq
压测的数据需要存储到压测的数据库

压测前：
程序改造：区分正式数据和压测数据
压测的请求需要有标记
比如：jemter http添加请求头，用于标记压测流量，覆盖整个链路


整体隔离：识别出热点表，配置表、日志表，把必要的数据复刻到影子数据库。
等于小规模的生产环境。
（大部分公司采用这种全链路）

账户隔离：造一些虚拟用户，买一些虚拟东西。
难点：数据的标记和数据清理


goreplay是用go写的http实时流量复制工具
链路的起点开始录制：nginx负载均衡开始，再到java服务器，redis这些。

流量录制：
1.安装go环境，安装gorealy
./gor -input -raw 8001 requests_0.gor
记录收到8001网络端口的所有请求

流量回放：
./gor -input-file requests_0.gor
生产环境录制的文件，拉下来，放到专门用于流量回放的服务器。

请求过滤：
按照method进行过滤
按照path进行过滤
按照请求头过滤


限速机制
限制每秒记录10个


流量回放速度提高，服务器是否可以抗的主5倍压力。（看服务器资源）















